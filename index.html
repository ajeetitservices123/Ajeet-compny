<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grammar Game App - Login & Save Progress</title>
    <style>
        * { box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 0; }
        body { background-color: #f9f9f9; display: flex; justify-content: center; height: 100vh; }
        
        /* App Container */
        .app-container { width: 100%; max-width: 400px; background: white; position: relative; overflow: hidden; box-shadow: 0 0 15px rgba(0,0,0,0.1); display: flex; flex-direction: column; }
        
        /* Header */
        .header { background: #4A90E2; color: white; padding: 15px; text-align: center; font-weight: bold; font-size: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); z-index: 10; }
        
        /* Screens */
        .screen { display: none; padding: 20px; flex: 1; overflow-y: auto; }
        .screen.active { display: block; }

        /* Level Badges Design */
        .level-container { text-align: center; margin-bottom: 30px; }
        .badge { width: 100px; height: 100px; border-radius: 50%; display: inline-flex; justify-content: center; align-items: center; font-size: 40px; margin-bottom: 10px; transition: transform 0.2s; }
        .badge:active { transform: scale(0.95); }
        .badge.unlocked { background: linear-gradient(135deg, #FFD700, #FFA500); box-shadow: 0 4px 10px rgba(255, 165, 0, 0.4); color: white; border: 4px solid #fff; cursor: pointer; }
        .badge.locked { background: #e0e0e0; color: #9e9e9e; border: 4px solid #fff; cursor: not-allowed; }
        .level-title { font-weight: bold; font-size: 16px; color: #333; }

        /* Card Design */
        .card { background: white; border-radius: 15px; padding: 25px; box-shadow: 0 8px 20px rgba(0,0,0,0.08); text-align: center; min-height: 280px; display: flex; flex-direction: column; justify-content: center; border: 2px solid #e1e8ed; }
        .card h2 { color: #4A90E2; margin-bottom: 15px; font-size: 20px; border-bottom: 2px dashed #e1e8ed; padding-bottom: 10px; }
        .card p { font-size: 16px; line-height: 1.6; color: #444; margin-bottom: 20px; }
        
        /* Buttons */
        .option-btn { width: 100%; padding: 12px; margin: 8px 0; border: 2px solid #e0e0e0; border-radius: 8px; background: white; font-size: 16px; cursor: pointer; transition: 0.3s; font-weight: bold; color: #333; }
        .option-btn.correct { background: #4caf50; color: white; border-color: #4caf50; }
        .option-btn.wrong { background: #f44336; color: white; border-color: #f44336; }
        
        .controls { display: flex; justify-content: space-between; margin-top: 20px; }
        .btn { padding: 14px 20px; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; }
        .btn-next { background: #4A90E2; color: white; width: 100%; box-shadow: 0 4px 10px rgba(74, 144, 226, 0.3); }
        .btn-next:disabled { background: #ccc; box-shadow: none; cursor: not-allowed; }

        /* Google Button Style */
        .google-btn { background: #db4437; color: white; display: flex; align-items: center; justify-content: center; gap: 10px; margin: 0 auto; width: 100%; max-width: 250px; box-shadow: 0 4px 10px rgba(219, 68, 55, 0.3); }
        .google-icon { background: white; color: #db4437; border-radius: 50%; width: 24px; height: 24px; display: inline-flex; justify-content: center; align-items: center; font-weight: bold; }
        
        .logout-btn { background: #f44336; color: white; padding: 8px 15px; border: none; border-radius: 5px; cursor: pointer; font-size: 12px; position: absolute; top: 15px; right: 15px; z-index: 20; display: none; }
    </style>
</head>
<body onload="checkLoginStatus()">

    <div class="app-container">
        <div class="header" id="app-header">Welcome</div>
        <button id="logout-btn" class="logout-btn" onclick="logout()">Logout</button>

        <div id="login-screen" class="screen active">
            <div style="text-align:center; margin-top:60px;">
                <h2 style="color:#4A90E2; margin-bottom:10px; font-size: 28px;">Grammar Master</h2>
                <p style="margin-bottom:40px; color:#555; font-size: 16px;">Sign in to save your progress and <b>enjoy the game</b>!</p>
                
                <button class="btn google-btn" onclick="simulateGoogleLogin()">
                    <span class="google-icon">G</span> 
                    Sign in with Google
                </button>
            </div>
        </div>

        <div id="level-screen" class="screen">
            <h3 style="text-align:center; margin-bottom:25px; color: #555;">Select Your Module</h3>
            
            <div class="level-container" id="level-1" onclick="startGame(1)">
                <div class="badge unlocked">üëë</div>
                <div class="level-title">1. Concord Masterclass</div>
            </div>

            <div class="level-container" id="level-2" onclick="startGame(2)">
                <div class="badge locked" id="badge-2">üîí</div>
                <div class="level-title" id="title-2">2. Tense Warrior (Locked)</div>
            </div>
        </div>

        <div id="game-screen" class="screen">
            <div id="card-container"></div>
            <div class="controls">
                <button id="next-btn" class="btn btn-next" onclick="nextCard()">Next üëâ</button>
            </div>
        </div>
    </div>

    <audio id="applause-sound" src="https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3" preload="auto"></audio>

    <script>
        // Data logic
        let highestLevelUnlocked = 1;
        let currentCardIndex = 0;
        let quizAnswered = false;

        // Mini Card Data for Demo
        const cardsData = [
            { type: 'theory', title: 'The Golden Rule üåü', content: 'Subject-Verb Concord ek bahut hi <b>thrilling game</b> hai! Singular ke sath Singular verb.' },
            { type: 'quiz', title: 'Quick Check!', question: 'The boy ______.', options: ['play', 'plays'], correct: 1 },
            { type: 'theory', title: 'Level Complete! üèÜ', content: 'Aapne yeh level jeet liya! <b>Enjoyment</b> ke sath naya level unlock karein!' }
        ];

        // 1. Check if user is already logged in
        function checkLoginStatus() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            if (isLoggedIn === 'true') {
                highestLevelUnlocked = parseInt(localStorage.getItem('highestLevel')) || 1;
                showLevelScreen();
            }
        }

        // 2. Simulate Login
        function simulateGoogleLogin() {
            // Save data to browser memory
            localStorage.setItem('isLoggedIn', 'true');
            localStorage.setItem('highestLevel', highestLevelUnlocked);
            showLevelScreen();
        }

        // 3. Logout (To test again)
        function logout() {
            localStorage.clear();
            highestLevelUnlocked = 1;
            document.getElementById('logout-btn').style.display = 'none';
            document.getElementById('level-screen').classList.remove('active');
            document.getElementById('login-screen').classList.add('active');
            document.getElementById('app-header').innerText = 'Welcome';
        }

        function showLevelScreen() {
            document.getElementById('login-screen').classList.remove('active');
            document.getElementById('game-screen').classList.remove('active');
            document.getElementById('level-screen').classList.add('active');
            document.getElementById('app-header').innerText = 'Master Classes';
            document.getElementById('logout-btn').style.display = 'block';

            // Update UI based on saved progress
            if (highestLevelUnlocked >= 2) {
                document.getElementById('badge-2').classList.replace('locked', 'unlocked');
                document.getElementById('badge-2').innerHTML = '‚≠ê';
                document.getElementById('title-2').innerText = '2. Tense Warrior (Unlocked!)';
            }
        }

        function startGame(level) {
            if (level > highestLevelUnlocked) {
                alert("Pahle pichla level clear karein!");
                return;
            }
            document.getElementById('level-screen').classList.remove('active');
            document.getElementById('game-screen').classList.add('active');
            document.getElementById('app-header').innerText = 'Playing...';
            currentCardIndex = 0;
            renderCard();
        }

        function renderCard() {
            const cardData = cardsData[currentCardIndex];
            const container = document.getElementById('card-container');
            const nextBtn = document.getElementById('next-btn');
            quizAnswered = false;

            let cardHTML = `<div class="card"><h2>${cardData.title}</h2>`;

            if (cardData.type === 'theory') {
                cardHTML += `<p>${cardData.content}</p>`;
                nextBtn.innerText = currentCardIndex === cardsData.length - 1 ? 'Claim Trophy üèÜ' : 'Next üëâ';
                nextBtn.disabled = false;
            } else if (cardData.type === 'quiz') {
                cardHTML += `<p><b>${cardData.question}</b></p>`;
                cardData.options.forEach((opt, index) => {
                    cardHTML += `<button class="option-btn" onclick="checkAnswer(${index}, ${cardData.correct}, this)">${opt}</button>`;
                });
                nextBtn.disabled = true;
            }

            container.innerHTML = cardHTML + `</div>`;
        }

        function checkAnswer(selectedIndex, correctIndex, btnElement) {
            if (quizAnswered) return;
            if (selectedIndex === correctIndex) {
                btnElement.classList.add('correct');
                document.getElementById('next-btn').disabled = false;
                quizAnswered = true;
                if(navigator.vibrate) navigator.vibrate(50);
            } else {
                btnElement.classList.add('wrong');
                if(navigator.vibrate) navigator.vibrate([100, 50, 100]);
            }
        }

        function nextCard() {
            if (currentCardIndex < cardsData.length - 1) {
                currentCardIndex++;
                renderCard();
            } else {
                finishLevel();
            }
        }

        function finishLevel() {
            if(navigator.vibrate) navigator.vibrate([200, 100, 200, 100, 400]);
            document.getElementById('applause-sound').play();
            
            alert("Congratulations! Naya level unlock ho gaya!");

            // SAVE PROGRESS TO BROWSER MEMORY
            highestLevelUnlocked = 2;
            localStorage.setItem('highestLevel', highestLevelUnlocked);
            
            showLevelScreen();
        }
    </script>
</body>
</html>
